# 关于视觉SLAM位姿变换的一些理解

## R和t下标的定义

对于空间中的某点$p$，其在坐标系1和坐标系2中的投影分别是$p_1$和$p_2$,那么三者有如下的关系：
$$
p_2 = R_{21}p_1+t_{21}
$$
注意这里的下标是**从右往左读**的，表示从坐标系1到坐标系2的旋转和平移。这里需要着重说明$t_{21}$，它的方向是从坐标系2指向坐标系1的向量。具体原因和向量的减法有关。

<img src="learning_basic.assets/img_v3_028j_41557c57-a216-4705-afdd-bc3304299dcg.jpg" alt="img_v3_028j_41557c57-a216-4705-afdd-bc3304299dcg" style="zoom:67%;" />

由上面的式子，$p_2 = R_{21}p_1+t_{21}$，如果先不考虑旋转，那么可以写成：$b = a + c$

那么$c=b-a$，根据向量的减法可以判断出c的方向是从坐标系2指向坐标系1的。



+ 注：

其实主要是要理解透彻在SLAM中的R和t是如何定义的，**R和t不是表示两个坐标系的变换，而是表示坐标系下的某点的变换关系**

以上述例子举例，坐标系1到坐标系2的R和t表示的是在坐标系2下的某点通过R和t转换到坐标系1中的坐标。而对于坐标系的转换：

$[R,t]$ 表示从坐标系2到坐标系1的转换。
$[R^T,-R^Tt]$表示从坐标系1到坐标系2的转换。

# 一些其他的重要的知识

## 协方差和散度矩阵

样本均值：
$$
\overline x=\frac{1}{n}\sum^N_{i=1}x_i
$$
样本方差：
$$
S^2=\frac{1}{n-1}\sum^n_{i=1}(x_i-\overline x)^2
$$
样本X和Y的协方差：

![img](learning_basic.assets/70.png)

散度矩阵和协方差矩阵的意义差不多，散度矩阵前乘以系数1/(n-1)就可以得到协方差矩阵了。

### 协方差矩阵的性质

（1）协方差矩阵是一个对称矩阵，且是**半正定矩阵**，**主对角线是各个随机变量 的方差（各个维度上的方差）**。

（2）标准差和方差一般是用来描述一维数据的；对于多维情况，而协方差是用于描述任意两维数据之间的关系，一般用协方差矩阵来表示。==因此协方差矩阵计算的是不同维度之间的协方差，而不是不同样本之间的==。

（3）协方差计算过程可简述为：先求各个分量的均值E(Xi)和E(Xj)，然后每个分量减去各自的均值得到两条向量，在进行内积运算，然后求内积后的总和，最后把总和除以n-1。

### 协方差矩阵的意义：

总结：

(1)样本均值决定**样本分布中心点的位置**。

(2)协方差矩阵决定**样本分布的扁圆程度**。

   是扁还是圆，由协方差矩阵的**特征值**决定：当特征值D1和D2的比值为1时（D1/D2=1），则样本分布形状为圆形。当特征值的比值不为1时，样本分布为扁形；

   偏向方向（数据传播方向）由**特征向量**决定。==最大特征值对应的特征向量，总是指向数据最大方差的方向（椭圆形的主轴方向）。次大特征向量总是正交于最大特征向量（椭圆形的短轴方向）。==

